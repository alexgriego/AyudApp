import{D as N}from"./Document-CIKjCiaG.js";import{d as v,r as u,i as k,a as l,e,m as h,t as n,F as x,x as C,g as p,s as m,h as F,o as i,R,b as B,u as b,_ as E}from"./index-B4B-70Mn.js";import{v as L,b as P,D as V,d as $,r as M}from"./familias.apis-C2lMnRmt.js";const A={class:"card"},H={class:"card-header"},I={class:"card-title"},S=e("br",null,null,-1),T={class:"card-body"},j=e("h5",null,"Personas a cargo",-1),q={key:0,class:"table table-striped table-hover"},z=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"ID"),e("th",{scope:"col"},"Nombres"),e("th",{scope:"col"},"Parentesco"),e("th",{scope:"col"},"Eliminar")])],-1),G={scope:"row"},J={class:"btn-group",role:"group","aria-label":"Basic example"},K=["onClick"],O=e("i",{class:"bi bi-trash"},null,-1),Q=[O],U={key:1,class:"alert alert-warning alert-dismissible fade show",role:"alert"},W=e("strong",null,"404!",-1),X=v({__name:"DetailComponent",setup(f){const o=F(),r=u([]),s=u([]),d=u({}),g=async()=>{const{data:t}=await V(Number(o.currentRoute.value.params.id));d.value=t},y=async()=>{const{data:t}=await L(Number(o.currentRoute.value.params.id));r.value=t;for(let c=0;c<r.value.length;c++){const{data:a}=await P(r.value[c]);s.value.push(a)}g()};k(async()=>{y()});const w=async t=>{await p("¿Está seguro de eliminar esta persona del núcleo?","Este proceso no se puede deshacer",()=>{M(t)}).then(c=>{if(m("Hecho","Persona eliminada"),s.value.length>1){let a=s.value.filter(_=>_.identificacion!==t);s.value=a}else s.value=[]})},D=async()=>{await p("¿Está seguro de eliminar este núcleo familiar?","Este proceso no se puede deshacer",()=>{$(Number(o.currentRoute.value.params.id))}).then(t=>{m("Hecho","Núcleo familiar eliminado"),o.push("/censos")})};return(t,c)=>(i(),l("div",A,[e("div",H,[e("h4",I,[h("Lider de familia: "+n(d.value.nombre)+" "+n(d.value.apellido)+" ",1),e("button",{type:"button",class:"btn btn-danger",onClick:D},"Borrar nucleo")]),S,e("div",T,[j,s.value.length?(i(),l("table",q,[z,e("tbody",null,[(i(!0),l(x,null,C(s.value,a=>(i(),l("tr",null,[e("th",G,n(a.tipo_iden)+": "+n(a.identificacion),1),e("td",null,n(a.nombre+" "+a.apellido),1),e("td",null,n(a.parentesco),1),e("td",null,[e("div",J,[e("button",{type:"button",class:"btn btn-danger",onClick:_=>w(a.identificacion)},Q,8,K)])])]))),256))])])):(i(),l("div",U,[W,h(" No hay personas a cargo. ")]))])])]))}}),Y={class:"col col-lg-8"},se=v({__name:"CensosDetailView",setup(f){let o=[{text:"Atrás",icon:"bi bi-arrow-left",link:"/censos",class:"btn btn-sm btn-secondary",type:"link"}];return R(),(r,s)=>(i(),l("div",Y,[B(E,{title:"Censos",buttons:b(o),icon:b(N),header:"Detalle de Censo",component:X},null,8,["buttons","icon"])]))}});export{se as default};
