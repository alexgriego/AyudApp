import{d as I,r as v,I as S,j as U,J as w,o as l,a as i,e,k as d,w as u,n as f,v as F,l as M,F as D,x as T,t as y,f as _,q as $,g as j,b as V,R as B,u as C,_ as E}from"./index-BKthAEvq.js";import{d as J}from"./demands-DrfuX-Nz.js";const L={class:"row"},P={class:"col"},O={class:"form-group"},R=["required"],z={class:"col"},A={class:"form-group"},G=["min","required"],H={class:"col"},K={class:"form-group"},Q=["min","required"],W={class:"row"},X={class:"form-group"},Y={class:"row"},Z={class:"col col-sm-5"},ee={class:"form-group"},oe={class:"custom-control custom-checkbox"},ae={key:0,class:"col col-auto"},te={class:"form-group"},ne={class:"input-group input-group mb-3"},se={class:"input-group-prepend",id:"identificacion"},le=["placeholder","disabled"],ie={class:"list-group"},re=["onClick"],de={key:0,class:"bi bi-check"},ue={key:1,class:"form-group"},ce=["required"],ve={key:0,class:"text-danger"},pe={key:1,class:"text-danger"},me=["disabled"],fe=I({__name:"FormComponent",setup(k){const a=v({id:0,descripcion:null,nombre:"",fecha_inicio:new Date,es_finalizado:!1,fecha_fin:null,producto:null,cantidad_producto:0,fondos:null,cantidad_fondos:0,created_at:new Date,created_by:""}),c=S(),n=v("No registra"),p=v(!1),m=v(""),b=v([]),s=v({}),r=v(0);U(async()=>{n.value==="Dinero"&&m.value.length>0?(b.value=await c.obtenerDinero(m.value),a.value={...a.value,fondos:s.value.id,producto:null,cantidad_producto:0}):n.value==="Insumos"&&m.value.length>0&&(b.value=await c.obtenerProductosJornadas(m.value),a.value={...a.value,producto:s.value.codigo,fondos:null,cantidad_fondos:0}),n.value==="No registra"&&(b.value=[])});const h=g=>{a.value={...a.value,[g.target.name]:g.target.value}},x=w(()=>new Date().toISOString().split("T")[0]),q=async g=>{let o=s.value.value;n.value==="Dinero"?a.value={...a.value,fondos:o.id,cantidad_fondos:r.value}:n.value==="Insumos"&&(a.value={...a.value,producto:o.codigo,cantidad_producto:r.value}),console.log(a.value),await j("¿Está seguro de procesar el evento?","Este proceso no se puede alterar",()=>{c.guardarJornada(a.value)})},N=w(()=>p.value?s.value&&(n.value==="Dinero"||n.value==="Insumos")?r.value>s.value.cantidad:!0:!1);return(g,o)=>(l(),i("form",{onSubmit:$(q,["prevent"])},[e("div",L,[e("div",P,[e("div",O,[o[8]||(o[8]=e("label",{for:"nombre"},[d("Nombre del evento "),e("i",{class:"bi bi-123"})],-1)),u(e("input",{type:"text",class:"form-control form-control-border",id:"nombre",name:"nombre",onInput:h,"onUpdate:modelValue":o[0]||(o[0]=t=>a.value.nombre=t),required:!a.value.nombre},null,40,R),[[f,a.value.nombre]])])]),e("div",z,[e("div",A,[o[9]||(o[9]=e("label",{for:"fecha_inicio"},[d("Fecha de inicio "),e("i",{class:"bi bi-calendar"})],-1)),u(e("input",{type:"date",class:"form-control form-control-border",id:"fecha_inicio",name:"fecha_inicio",onInput:h,"onUpdate:modelValue":o[1]||(o[1]=t=>a.value.fecha_inicio=t),min:x.value,required:!a.value.fecha_inicio},null,40,G),[[f,a.value.fecha_inicio]])])]),e("div",H,[e("div",K,[o[10]||(o[10]=e("label",{for:"fecha_fin"},[d("Fecha de finalización "),e("i",{class:"bi bi-calendar"})],-1)),u(e("input",{type:"date",class:"form-control form-control-border",id:"fecha_fin",name:"fecha_fin",onInput:h,"onUpdate:modelValue":o[2]||(o[2]=t=>a.value.fecha_fin=t),min:x.value,required:!a.value.fecha_fin},null,40,Q),[[f,a.value.fecha_fin]])])])]),e("div",W,[e("div",X,[u(e("textarea",{name:"descripcion","onUpdate:modelValue":o[3]||(o[3]=t=>a.value.descripcion=t),id:"descripcion",cols:"60",rows:"10",placeholder:"descripcion del evento",onInput:h},null,544),[[f,a.value.descripcion]])])]),e("div",Y,[e("div",Z,[e("div",ee,[o[12]||(o[12]=e("label",{for:"habilitar_insumos"},[d("¿Se emplearán insumos? "),e("i",{class:"bi bi-check"})],-1)),e("div",oe,[u(e("input",{type:"checkbox",class:"custom-control-input",id:"habilitar_insumos","onUpdate:modelValue":o[4]||(o[4]=t=>p.value=t)},null,512),[[F,p.value]]),o[11]||(o[11]=e("label",{class:"custom-control-label",for:"habilitar_insumos"},null,-1))])])]),p.value?(l(),i("div",ae,[e("div",te,[o[14]||(o[14]=e("label",{for:"identificacion"},[d("Tipo de insumo "),e("i",{class:"bi bi-person-vcard"})],-1)),e("div",ne,[e("div",se,[u(e("select",{class:"custom-select","onUpdate:modelValue":o[5]||(o[5]=t=>n.value=t)},o[13]||(o[13]=[e("option",{title:"Cédulda de ciudadanía"},"No registra",-1),e("option",{title:"Cédula de extrangería"},"Dinero",-1),e("option",{title:"Tarjeta de identidad"},"Insumos",-1)]),512),[[M,n.value]])]),u(e("input",{type:"text",class:"form-control","onUpdate:modelValue":o[6]||(o[6]=t=>m.value=t),placeholder:n.value==="Dinero"?"Indique patrocinador":n.value==="Insumos"?"Indique codigo":"Indique una opción",disabled:n.value==="No registra"},null,8,le),[[f,m.value]])])]),b.value.length>0?(l(!0),i(D,{key:0},T(b.value,t=>(l(),i("ul",ie,[e("li",{class:"list-group-item",onClick:()=>{s.value.value=t}},[d(y(n.value==="Insumos"?t.codigo+" - "+t.nombre+" - "+t.cantidad+" Unds. disponibles":t.patrocinador+" - $"+t.cantidad+"COP")+" ",1),n.value!=="No registra"&&s.value.value===t?(l(),i("i",de)):_("",!0)],8,re)]))),256)):_("",!0),p.value?(l(),i("div",ue,[o[15]||(o[15]=e("label",{for:"cantidad"},[d("Cantidad "),e("i",{class:"bi bi-clipboard"})],-1)),u(e("input",{type:"number",class:"form-control form-control-border",id:"cantidad",name:"cantidad","onUpdate:modelValue":o[7]||(o[7]=t=>r.value=t),required:!r.value&&p.value},null,8,ce),[[f,r.value]]),s.value.value&&n.value==="Dinero"&&r.value>s.value.value.cantidad?(l(),i("span",ve," La cantidad debe ser menor o igual a "+y(s.value.value.cantidad)+" COP ",1)):_("",!0),s.value.value&&n.value==="Insumos"&&r.value>s.value.value.cantidad?(l(),i("span",pe," La cantidad debe ser menor o igual a "+y(s.value.value.cantidad)+" unidades disponibles ",1)):_("",!0)])):_("",!0)])):_("",!0)]),e("button",{type:"submit",class:"btn btn-primary",disabled:N.value},o[16]||(o[16]=[d("Procesar "),e("i",{class:"bi bi-save"},null,-1)]),8,me)],32))}}),_e=I({__name:"CreateComponent",setup(k){return(a,c)=>(l(),i(D,null,[c[0]||(c[0]=e("h6",null,"Ingrese los datos requeridos",-1)),V(fe)],64))}}),be={class:"col col-lg-6"},ye=I({__name:"CreateView",setup(k){let a=[{text:"Volver",icon:"bi bi-arrow-left",link:"/jornadas",class:"btn btn-sm btn-primary",type:"link"}];return B(),(c,n)=>(l(),i("div",be,[V(E,{icon:C(J),header:"Jornadas",title:"Crear jornada",buttons:C(a),component:_e},null,8,["icon","buttons"])]))}});export{ye as default};
